define(['underscore'],function(){let start,duration=600,distance,timeStart,timeElapsed=0;function easing(t,d){t=t / d;return t<.5?8*t*t*t*t:1-8*(--t)*t*t*t;}
const SmoothScroll=function(link){const href=link.getAttribute('href');this.targetSection=document.querySelector('a[name="'+href.substr(href.indexOf('#')+1)+'"]');if((href!=='#'||href!=='#0')&&this.targetSection){link.addEventListener('click',this.scrollToTarget.bind(this));}};SmoothScroll.prototype={scrollToTarget:function(event){event.preventDefault();start=this.getScrollY();distance=(this.getTopOffset())-start;requestAnimationFrame(function(time){timeStart=time;this.loop.call(this,time);}.bind(this));},getTopOffset:function(){return this.targetSection.getBoundingClientRect().top-document.body.getBoundingClientRect().top;},getScrollY:function(){let doc=document.documentElement;return(window.pageYOffset||doc.scrollTop)-(doc.clientTop||0);},loop:function(time){timeElapsed=time-timeStart;window.scrollTo(0,start+distance*easing(timeElapsed,duration));if(timeElapsed<duration){requestAnimationFrame(this.loop.bind(this));}else{this.end();}},end:function(){window.scrollTo(0,start+distance);this.setFocus();},setFocus:function(){if(this.targetSection&&typeof this.targetSection!=='number'&&this.targetSection.tagName){if(!/^(?:a|select|input|button|textarea)$/i.test(this.targetSection.tagName)){this.targetSection.tabIndex=-1;}
this.targetSection.focus();}}};return function(config,element){new SmoothScroll(element);};});